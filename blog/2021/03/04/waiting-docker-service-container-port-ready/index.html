<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In this post, I will show how I configured my dotnet core docker container to wait for another docker container before loading the application."><title>Waiting for Docker Service Container Port to Be Ready</title><link rel=canonical href=https://www.chingono.com/blog/2021/03/04/waiting-docker-service-container-port-ready/><link rel=stylesheet href=/scss/style.min.b80bf249ce4a22cf55e8d7340a0b37a2f2c10f54f3a9a49cb94b694a2eb0bbea.css><meta property="og:title" content="Waiting for Docker Service Container Port to Be Ready"><meta property="og:description" content="In this post, I will show how I configured my dotnet core docker container to wait for another docker container before loading the application."><meta property="og:url" content="https://www.chingono.com/blog/2021/03/04/waiting-docker-service-container-port-ready/"><meta property="og:site_name" content="Alfero Chingono"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="docker"><meta property="article:tag" content="dotnet-core"><meta property="article:tag" content="sql-server"><meta property="article:tag" content="bash"><meta property="article:tag" content="tcp"><meta property="article:published_time" content="2021-03-04T12:21:28+00:00"><meta property="article:modified_time" content="2022-03-25T22:59:55+00:00"><meta property="og:image" content="https://www.chingono.com/blog/2021/03/04/waiting-docker-service-container-port-ready/cover.jpg"><meta name=twitter:site content="@achingono"><meta name=twitter:creator content="@achingono"><meta name=twitter:title content="Waiting for Docker Service Container Port to Be Ready"><meta name=twitter:description content="In this post, I will show how I configured my dotnet core docker container to wait for another docker container before loading the application."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.chingono.com/blog/2021/03/04/waiting-docker-service-container-port-ready/cover.jpg"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-1589660-8","auto"),ga("send","pageview"))</script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><script type=text/javascript>(function(e,o,t,i,a,n,s){e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},n=o.createElement(i),n.async=1,n.src="https://www.clarity.ms/tag/"+a,s=o.getElementsByTagName(i)[0],s.parentNode.insertBefore(n,s)})(window,document,"clarity","script","b37k7nmp0e")</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu3a264f08247c62e220aca1ae3ddb41c3_4625_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ðŸ”†</span></figure><div class=site-meta><h1 class=site-name><a href=/>Alfero Chingono</a></h1><h2 class=site-description>Cloud Solutions Architect | DevOps Advocate | Trusted Advisor</h2></div></header><ol class=social-menu><li><a href=https://github.com/achingono target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/achingono/ target=_blank title=LinkedIn><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-linkedin" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="4" width="16" height="16" rx="2"/><line x1="8" y1="11" x2="8" y2="16"/><line x1="8" y1="8" x2="8" y2="8.01"/><line x1="12" y1="16" x2="12" y2="11"/><path d="M16 16v-3a2 2 0 00-4 0"/></svg></a></li><li><a href=https://twitter.com/achingono target=_blank title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About Me</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/blog/2021/03/04/waiting-docker-service-container-port-ready/><img src=/blog/2021/03/04/waiting-docker-service-container-port-ready/cover_hu62f23ae666e781c65386d17f3dc1416f_38807_800x0_resize_q75_box.jpg srcset="/blog/2021/03/04/waiting-docker-service-container-port-ready/cover_hu62f23ae666e781c65386d17f3dc1416f_38807_800x0_resize_q75_box.jpg 800w, /blog/2021/03/04/waiting-docker-service-container-port-ready/cover_hu62f23ae666e781c65386d17f3dc1416f_38807_1600x0_resize_q75_box.jpg 1600w" width=800 height=331 loading=lazy alt="Featured image of post Waiting for Docker Service Container Port to Be Ready"></a></div><div class=article-details><header class=article-category><a href=/categories/containers/>containers</a>
<a href=/categories/development/>development</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/blog/2021/03/04/waiting-docker-service-container-port-ready/>Waiting for Docker Service Container Port to Be Ready</a></h2><h3 class=article-subtitle>In this post, I will show how I configured my dotnet core docker container to wait for another docker container before loading the application.</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Mar 04, 2021</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><p>Recently, I was working on a pet project and had created my <code>Dockerfile</code> for the ASP.NET Core container as well as the <code>docker-compose.yml</code> file to compose the services.</p><p>Here&rsquo;s the <code>Dockerfile</code> I had:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Dockerfile data-lang=Dockerfile><span class=line><span class=cl><span class=c># [Choice] .NET Core version: 5.0, 3.1, 2.1</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> <span class=nv>VARIANT</span><span class=o>=</span><span class=m>3</span>.1<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># create a base runtime image with node</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> mcr.microsoft.com/dotnet/core/aspnet:${VARIANT} AS runtime</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>EXPOSE</span><span class=s> 80</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>EXPOSE</span><span class=s> 443</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> curl -sL https://deb.nodesource.com/setup_10.x <span class=p>|</span>  bash -<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> apt-get install -y nodejs<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># create a base SDK image with node</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> mcr.microsoft.com/dotnet/core/sdk:${VARIANT} as sdk</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> curl -sL https://deb.nodesource.com/setup_10.x <span class=p>|</span>  bash -<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> apt-get install -y nodejs<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># copy source files</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> sdk as build</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> src/ ./src<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># install npm packages</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c>#WORKDIR /src/Business.Web/Spa</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c>#RUN npm install</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c>#RUN npm run build</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># restore nuget packages</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /src</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> dotnet restore<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># run publish command</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> build as publish</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> dotnet publish -c Release -o /release --no-restore<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># create release image from base runtime image</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> runtime AS release</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> --from<span class=o>=</span>publish /release .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENTRYPOINT</span> <span class=p>[</span><span class=s2>&#34;dotnet&#34;</span><span class=p>,</span> <span class=s2>&#34;Business.Web.dll&#34;</span><span class=p>]</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><p>And the <code>docker-compose.yml</code> file:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=c># https://docs.docker.com/compose/compose-file/compose-file-v3/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>app</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>build</span><span class=p>:</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>context</span><span class=p>:</span><span class=w> </span><span class=l>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>dockerfile</span><span class=p>:</span><span class=w> </span><span class=l>Dockerfile</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>args</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># [Choice] Update &#39;VARIANT&#39; to pick a .NET Core version: 2.1, 3.1, 5.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>VARIANT</span><span class=p>:</span><span class=w> </span><span class=m>3.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>business_web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>ASPNETCORE_ENVIRONMENT=Testing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>ASPNETCORE_URLS=http://+:80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>ASPNETCORE_ConnectionStrings__Db=Server=db;Database=Business.Web;User ID=sa;Password=V3ry$ecureP@ssw0rd;MultipleActiveResultSets=False;Connection Timeout=30;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># https://docs.docker.com/compose/startup-order/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>db</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=kc>on</span>-<span class=l>failure</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;8080:80&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;8443:443&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>~/.aspnet/https:/https:ro    </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>db</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>mcr.microsoft.com/mssql/server:2019-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SA_PASSWORD=V3ry$ecureP@ssw0rd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>ACCEPT_EULA=Y</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>My biggest challenge was that even though I had set the <code>app</code> service to depend on the <code>db</code> service, the <code>app</code> service would start before the <code>db</code> service was really ready to receive connections. This resulted in .net startup errors, crash loops and the container eventually shutting down:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
</span></span><span class=line><span class=cl>     Entity Framework Core 3.1.3 initialized &#39;DataContext&#39; using provider &#39;Microsoft.EntityFrameworkCore.SqlServer&#39; with options: None
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>crit: Microsoft.AspNetCore.Hosting.Diagnostics[6]
</span></span><span class=line><span class=cl>     Application startup exception
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>---&gt; System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000001, 11): Resource temporarily unavailable
</span></span></code></pre></td></tr></table></div></div><p>Since there was some initialization code and database seeding that had to take place before the application was ready to run, I wanted to ensure that the dotnet code started only when the database container/service was ready to receive connections.</p><p>After some searching on the internet, I found this answer on the <a class=link href=https://unix.stackexchange.com target=_blank rel=noopener>Unix StackExchange</a>:</p><p><a class=link href=https://unix.stackexchange.com/questions/86556/testing-remote-tcp-port-using-telnet-by-running-a-one-line-command/406356#406356 target=_blank rel=noopener>Testing remote TCP port using telnet by running a one-line command</a></p><p>Now, I needed to ensure this command runs before launching the .net site, and only after the db server was ready to receive connections on port <code>1433</code>. So, after some further searching, trial and error, I eventually landed on the following two scripts:</p><p><code>testconnection.sh</code> is a copy of the code found on Unix StackExchange:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># https://unix.stackexchange.com/a/406356</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$2</span><span class=s2>&#34;</span> <span class=o>==</span> <span class=s2>&#34;&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl> <span class=nb>echo</span> <span class=s2>&#34;Syntax: </span><span class=nv>$0</span><span class=s2> &lt;host&gt; &lt;port&gt;&#34;</span>
</span></span><span class=line><span class=cl> exit<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>host</span><span class=o>=</span><span class=nv>$1</span>
</span></span><span class=line><span class=cl><span class=nv>port</span><span class=o>=</span><span class=nv>$2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>r</span><span class=o>=</span><span class=k>$(</span>bash -c <span class=s1>&#39;exec 3&lt;&gt; /dev/tcp/&#39;</span><span class=nv>$host</span><span class=s1>&#39;/&#39;</span><span class=nv>$port</span><span class=s1>&#39;;echo $?&#39;</span> 2&gt;/dev/null<span class=k>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$r</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;0&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>     <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$host</span><span class=s2> </span><span class=nv>$port</span><span class=s2> is open&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>     <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$host</span><span class=s2> </span><span class=nv>$port</span><span class=s2> is closed&#34;</span>
</span></span><span class=line><span class=cl>     <span class=nb>exit</span> <span class=m>1</span> <span class=c1># To force fail result in ShellScript</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></td></tr></table></div></div><p><code>entrypoint.sh</code> is the entry point of the container. It checks the tcp port for readiness then executes the command for the container when the tcp port is open:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nb>set</span> -e
</span></span><span class=line><span class=cl><span class=c1># get the first two arguments</span>
</span></span><span class=line><span class=cl><span class=nv>server</span><span class=o>=</span><span class=nv>$1</span>
</span></span><span class=line><span class=cl><span class=nv>port</span><span class=o>=</span><span class=nv>$2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># check if we have 3 or more arguments</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$3</span><span class=s2>&#34;</span> <span class=o>==</span> <span class=s2>&#34;&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl> <span class=nb>echo</span> <span class=s2>&#34;Syntax: </span><span class=nv>$0</span><span class=s2> &lt;host&gt; &lt;port&gt; &lt;command&gt; [&lt;arg&gt;, &lt;arg&gt;, ...]&#34;</span>
</span></span><span class=line><span class=cl> exit<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># use the first two arguments to test the tcp connection</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Testing connection to </span><span class=si>${</span><span class=nv>server</span><span class=si>}</span><span class=s2>:</span><span class=si>${</span><span class=nv>port</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>until</span> ./testconnection.sh <span class=nv>$server</span> <span class=nv>$port</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>&gt;<span class=p>&amp;</span><span class=m>2</span> <span class=nb>echo</span> <span class=s2>&#34;SQL Server is starting up&#34;</span>
</span></span><span class=line><span class=cl>sleep <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&gt;<span class=p>&amp;</span><span class=m>2</span> <span class=nb>echo</span> <span class=s2>&#34;SQL Server is up - executing command&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># https://stackoverflow.com/a/3816747</span>
</span></span><span class=line><span class=cl><span class=c1># use the rest of the arguments to start up the container</span>
</span></span><span class=line><span class=cl><span class=nb>exec</span> <span class=s2>&#34;</span><span class=si>${</span><span class=p>@:</span><span class=nv>3</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>Key points to note here are that <code>entrypoint.sh</code> uses the first two arguments for checking the tcp port and the rest of the arguments for container startup. So, instead of starting up our container this way:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>ENTRYPOINT</span> <span class=p>[</span><span class=s2>&#34;dotnet&#34;</span><span class=p>,</span> <span class=s2>&#34;Business.Web.dll&#34;</span><span class=p>]</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><p>We will use the following approach instead:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>COPY</span> entrypoint.sh .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> testconnection.sh .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> chmod +x ./entrypoint.sh<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> chmod +x ./testconnection.sh<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>CMD</span> /bin/bash ./entrypoint.sh db <span class=m>1433</span> dotnet Business.Web.dll<span class=err>
</span></span></span></code></pre></td></tr></table></div></div><p>When the services are started with this new dockerfile, this is what I got in the logs:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>SQL Server is starting up
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>SQL Server is starting up
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>SQL Server is starting up
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>SQL Server is starting up
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>SQL Server is starting up
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>SQL Server is up - executing command: &#39;sh -c dotnet Business.Web.dll&#39;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Testing connection to data:1433
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>data 1433 is closed
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>data 1433 is closed
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>data 1433 is closed
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>data 1433 is closed
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>data 1433 is closed
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>data 1433 is open
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>info: Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager[64]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      Azure Web Sites environment detected. Using &#39;/root/ASP.NET/DataProtection-Keys&#39; as key repository; keys will not be encrypted at rest.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>warn: Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository[60]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      Storing keys in a directory &#39;/root/ASP.NET/DataProtection-Keys&#39; that may not be persisted outside of the container. Protected data will be unavailable when 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      Entity Framework Core 5.0.6 initialized &#39;DataContext&#39; using provider &#39;Microsoft.EntityFrameworkCore.SqlServer&#39; with options: None
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>info: Microsoft.EntityFrameworkCore.Database.Command[20101]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      Executed DbCommand (22ms) [Parameters=[], CommandType=&#39;Text&#39;, CommandTimeout=&#39;30&#39;]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      SELECT 1
</span></span></code></pre></td></tr></table></div></div><p>As you can see, this solution allowed my <code>app</code> container to wait for as long as it needed to before starting the .net application. Hopefully, you find that helpful, dear reader.</p><p>Credits:<br><a class=link href=https://unix.stackexchange.com/questions/86556/testing-remote-tcp-port-using-telnet-by-running-a-one-line-command/406356#406356 target=_blank rel=noopener>Testing remote TCP port using telnet by running a one-line command</a><br><a class=link href=https://stackoverflow.com/a/3816747 target=_blank rel=noopener>How to pass all arguments passed to my bash script to a function of mine?</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/docker/>docker</a>
<a href=/tags/dotnet-core/>dotnet-core</a>
<a href=/tags/sql-server/>sql-server</a>
<a href=/tags/bash/>bash</a>
<a href=/tags/tcp/>tcp</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>Last updated on Mar 25, 2022 22:59 EST</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>Related contents</h2><div class=related-contents><div class="flex article-list--tile"><article class=has-image><a href=/blog/2021/03/15/dockerfile-combine-entrypoint-cmd/><div class=article-image><img src=/blog/2021/03/15/dockerfile-combine-entrypoint-cmd/cover.5055f707824d2791f6d3c937e893a7c4_hubb1745ac1c8ec556e18776479db3c0c5_28145_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post Combining ENTRYPOINT and CMD in a Dockerfile" data-key=dockerfile-combine-entrypoint-cmd data-hash="md5-UFX3B4JNJ5H208k36JOnxA=="></div><div class=article-details><h2 class=article-title>Combining ENTRYPOINT and CMD in a Dockerfile</h2></div></a></article><article class=has-image><a href=/blog/2021/03/11/reference-environment-variables-docker-startup-script/><div class=article-image><img src=/blog/2021/03/11/reference-environment-variables-docker-startup-script/cover.ddead4257e7de72cd7b4359e30399616_hu5baa1151b514a27cf3a27c15e1c673f5_55131_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt="Featured image of post Reference Environment Variables in Docker Startup Script" data-key=reference-environment-variables-docker-startup-script data-hash="md5-3erUJX595yzXtDWeMDmWFg=="></div><div class=article-details><h2 class=article-title>Reference Environment Variables in Docker Startup Script</h2></div></a></article><article class=has-image><a href=/blog/2021/04/21/restore-database-on-container-start-up/><div class=article-image><img src=/blog/2021/04/21/restore-database-on-container-start-up/cover.0d8af13e6f29965bc2ba2e172fd5521e_hua6d920ccffbe7712bb5e078193bdddf7_60920_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt="Featured image of post Restore Database on Container Start Up" data-key=restore-database-on-container-start-up data-hash="md5-DYrxPm8pllvCui4XL9VSHg=="></div><div class=article-details><h2 class=article-title>Restore Database on Container Start Up</h2></div></a></article><article class=has-image><a href=/blog/2021/04/07/dockerizing-blazor-wasm-application/><div class=article-image><img src=/blog/2021/04/07/dockerizing-blazor-wasm-application/cover.a9c08f53aa62f9f51530980806a05209_hu54647e4733936e0a413cf65fbe4dc5e0_77413_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt="Featured image of post Dockerizing Blazor Wasm Application" data-key=dockerizing-blazor-wasm-application data-hash="md5-qcCPU6pi+fUVMJgIBqBSCQ=="></div><div class=article-details><h2 class=article-title>Dockerizing Blazor Wasm Application</h2></div></a></article><article class=has-image><a href=/blog/2021/03/23/optimizing-dockerfile-startup-script-with-environment-variables/><div class=article-image><img src=/blog/2021/03/23/optimizing-dockerfile-startup-script-with-environment-variables/cover.30218be0d5339fa6b4a4b029c6839a85_hu79b5dba812486e751d6f5b1c2c232866_25286_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post Optimizing Dockerfile Startup Script With Environment Variables" data-key=optimizing-dockerfile-startup-script-with-environment-variables data-hash="md5-MCGL4NUzn6a0pLApxoOahQ=="></div><div class=article-details><h2 class=article-title>Optimizing Dockerfile Startup Script With Environment Variables</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=achingono/achingono.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxNjE3MTg1NzM=" data-category=general data-category-id=DIC_kwDOCaOhLc4COKuY data-mapping=title data-reactions-enabled=1 data-emit-metadata=0 data-theme=light data-lang=en crossorigin=anonymous async></script>
<script>function setGiscusTheme(t){let e=document.querySelector("iframe.giscus-frame");e&&e.contentWindow.postMessage({giscus:{setConfig:{theme:t}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){document.documentElement.dataset.scheme==="light"?setGiscusTheme("light"):setGiscusTheme("dark_dimmed")}})()</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2022 Alfero Chingono</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.10.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>
<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Learn how to automate notifications for work item updates in Azure DevOps using Power Automate. This step-by-step guide covers everything from setting up the trigger to handling work item state changes with expressions."><title>Automating Notifications in Azure Devops Using Power Automate</title>
<link rel=canonical href=https://www.chingono.com/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Automating Notifications in Azure Devops Using Power Automate"><meta property='og:description' content="Learn how to automate notifications for work item updates in Azure DevOps using Power Automate. This step-by-step guide covers everything from setting up the trigger to handling work item state changes with expressions."><meta property='og:url' content='https://www.chingono.com/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/'><meta property='og:site_name' content='Alfero Chingono'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Azure DevOps'><meta property='article:tag' content='Power Automate'><meta property='article:tag' content='Automation'><meta property='article:tag' content='Work Item Tracking'><meta property='article:tag' content='Notifications'><meta property='article:published_time' content='2024-10-08T21:11:43+00:00'><meta property='article:modified_time' content='2024-10-09T15:56:50+00:00'><meta property='og:image' content='https://www.chingono.com/'><meta name=twitter:site content="@achingono"><meta name=twitter:creator content="@achingono"><meta name=twitter:title content="Automating Notifications in Azure Devops Using Power Automate"><meta name=twitter:description content="Learn how to automate notifications for work item updates in Azure DevOps using Power Automate. This step-by-step guide covers everything from setting up the trigger to handling work item state changes with expressions."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://www.chingono.com/'><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","b37k7nmp0e")</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu17663250342986369872.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ðŸ”†</span></figure><div class=site-meta><h1 class=site-name><a href=/>Alfero Chingono</a></h1><h2 class=site-description>Cloud Solutions Architect | DevOps Advocate | Trusted Advisor</h2></div></header><ol class=menu-social><li><a href=https://github.com/achingono target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/achingono/ target=_blank title=LinkedIn rel=me><svg class="icon icon-tabler icon-tabler-brand-linkedin" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="4" width="16" height="16" rx="2"/><line x1="8" y1="11" x2="8" y2="16"/><line x1="8" y1="8" x2="8" y2="8.01"/><line x1="12" y1="16" x2="12" y2="11"/><path d="M16 16v-3a2 2 0 00-4 0"/></svg></a></li><li><a href=https://twitter.com/achingono target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About Me</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><ol><li><a href=#why-use-power-automate-for-azure-devops>Why Use Power Automate for Azure DevOps?</a></li></ol></li><li><a href=#step-1-setting-up-the-trigger>Step 1: Setting Up the Trigger</a></li><li><a href=#step-2-initialize-variables>Step 2: Initialize Variables</a></li><li><a href=#step-3-checking-if-the-work-item-state-has-changed>Step 3: Checking if the Work Item State Has Changed</a></li><li><a href=#step-4-getting-work-item-relationships>Step 4: Getting Work Item Relationships</a></li><li><a href=#step-5-set-the-hasartifactlinks-flag>Step 5: Set the HasArtifactLinks Flag</a></li><li><a href=#step-6-handling-different-work-item-states>Step 6: Handling Different Work Item States</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article data-clarity-region=article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/azure/>Azure
</a><a href=/categories/automation/>Automation
</a><a href=/categories/devops/>Devops</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/>Automating Notifications in Azure Devops Using Power Automate</a></h2><h3 class=article-subtitle>Learn how to automate notifications for work item updates in Azure DevOps using Power Automate. This step-by-step guide covers everything from setting up the trigger to handling work item state changes with expressions.</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Oct 08, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>6 minute read</time></div></footer></div></header><section class=article-content><p>Managing work items in <a class=link href="https://learn.microsoft.com/en-us/azure/devops/?view=azure-devops" target=_blank rel=noopener>Azure DevOps</a> is crucial for efficient software development. To enhance communication and collaboration, I created a Power Automate flow that automatically notifies team members whenever a work item is updated. This post will guide you through the steps I took to create this flow.</p><h3 id=why-use-power-automate-for-azure-devops>Why Use Power Automate for Azure DevOps?</h3><p><a class=link href=https://learn.microsoft.com/en-us/power-automate/ target=_blank rel=noopener>Power Automate</a> is a powerful tool that integrates seamlessly with Azure DevOps, automating tasks like sending notifications, updating items, or even triggering workflows. By automating notifications, you ensure that relevant team members are instantly informed about the status or changes in work items.</p><h2 id=step-1-setting-up-the-trigger>Step 1: Setting Up the Trigger</h2><p>To get started, I needed to create the trigger that fires whenever a work item in Azure DevOps is updated.</p><ol><li>Head over to Power Automate and select <strong>Create a new flow</strong>.</li><li>Choose <strong>Automated flow</strong>, and for the trigger, select <strong>When a work item is updated</strong>.</li><li>Enter your Azure DevOps organization name and the project youâ€™re working on.
<img src=/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/trigger.png width=606 height=796 srcset="/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/trigger_hu13719736483303383169.png 480w, /blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/trigger_hu12582002779353767459.png 1024w" loading=lazy alt="Trigger: When a work item is updated" class=gallery-image data-flex-grow=76 data-flex-basis=182px></li></ol><p>This is the most basic part, but the rest of the flow will depend on what specific conditions you need the flow to respond to.</p><blockquote><p><strong>NOTE:</strong> Please pay attention to the section <em>How often do you want to check for items?</em>. The interval specified here will need to match the interval used to determine state changes later.</p></blockquote><h2 id=step-2-initialize-variables>Step 2: Initialize Variables</h2><p>To keep track of the work itemâ€™s state and artifact links, I initialized two variables:</p><ul><li><strong>LastTime:</strong> This helps track the time interval between updates.</li><li><strong>HasArtifactLinks:</strong> This checks if any artifact links (commits, pull requests) are attached to the work item.</li></ul><p>Hereâ€™s how to set up the variables:</p><ol><li><p>Add a new <strong>Initialize Variable</strong> action.</p></li><li><p>Name the first variable <strong>LastTime</strong>. Set its type to <code>String</code> and its initial value to" <code>getPastTime(3, 'Minute')</code>.</p><blockquote><p><strong>NOTE:</strong> The number <code>3</code> here needs to match the value in the trigger as mentioned before.</p></blockquote></li><li><p>Add a second <strong>Initialize Variable</strong> action, name this one <code>HasArtifactLinks</code>, set its type to <code>Boolean</code>, and default it to <code>false</code>.</p></li></ol><h2 id=step-3-checking-if-the-work-item-state-has-changed>Step 3: Checking if the Work Item State Has Changed</h2><p>Next, I wanted the flow to only proceed if the work itemâ€™s state had changed. To do this:</p><ol><li><p>Add a Condition action.</p></li><li><p>In the left box, enter the expression:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>triggerOutputs</span><span class=p>()</span><span class=sc>?[</span><span class=s1>&#39;body/fields&#39;</span><span class=o>]</span><span class=sc>?[</span><span class=s1>&#39;Microsoft_VSTS_Common_StateChangeDate&#39;</span><span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Set the condition to <code>is equal to</code>.</p></li><li><p>In the right box, enter the expression:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>triggerOutputs</span><span class=p>()</span><span class=sc>?[</span><span class=s1>&#39;body/fields&#39;</span><span class=o>]</span><span class=sc>?[</span><span class=s1>&#39;System_ChangedDate&#39;</span><span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Add a line item to the condition</p></li><li><p>In the left box, enter the expression:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>triggerOutputs</span><span class=p>()</span><span class=sc>?[</span><span class=s1>&#39;body/fields&#39;</span><span class=o>]</span><span class=sc>?[</span><span class=s1>&#39;Microsoft_VSTS_Common_StateChangeDate&#39;</span><span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Set the condition to <code>is greater or equal to</code>.</p></li><li><p>In the right box, select the <code>LastTime</code> variable.</p></li><li><p>The complete expression should look like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=s2>&#34;or&#34;</span><span class=err>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;equals&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;@triggerOutputs()?[&#39;body/fields&#39;]?[&#39;Microsoft_VSTS_Common_StateChangeDate&#39;]&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;@triggerOutputs()?[&#39;body/fields&#39;]?[&#39;System_ChangedDate&#39;]&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;greaterOrEquals&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;@triggerOutputs()?[&#39;body/fields&#39;]?[&#39;Microsoft_VSTS_Common_StateChangeDate&#39;]&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;@variables(&#39;LastTime&#39;)&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><p>If the state has changed, the flow will proceed; otherwise, it will exit at this point.</p><h2 id=step-4-getting-work-item-relationships>Step 4: Getting Work Item Relationships</h2><p>To handle work item relationships (e.g., linking artifacts), I added the following steps:</p><ol><li><p>Add an action <strong>Send an HTTP request to Azure DevOps</strong>.</p><p><img src=/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/send-http.png width=627 height=436 srcset="/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/send-http_hu8720245540530129640.png 480w, /blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/send-http_hu4660900994169760533.png 1024w" loading=lazy alt="Add an action &ldquo;Send an HTTP request to Azure DevOps&rdquo;" class=gallery-image data-flex-grow=143 data-flex-basis=345px></p></li><li><p>Specify the same organization name as in the trigger.</p></li><li><p>Set the <strong>Method</strong> to <code>GET</code>.</p></li><li><p>Set the <strong>Relative URI</strong> to the following expression:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=err>@</span><span class=p>{</span><span class=n>triggerOutputs</span><span class=p>()</span><span class=sc>?[</span><span class=s1>&#39;body/fields&#39;</span><span class=o>]</span><span class=sc>?[</span><span class=s1>&#39;System_TeamProject&#39;</span><span class=o>]</span><span class=p>}</span><span class=o>/</span><span class=n>_apis</span><span class=o>/</span><span class=n>wit</span><span class=o>/</span><span class=n>workitems</span><span class=o>/</span><span class=err>@</span><span class=p>{</span><span class=n>triggerOutputs</span><span class=p>()</span><span class=sc>?[</span><span class=s1>&#39;body/id&#39;</span><span class=o>]</span><span class=p>}?</span><span class=vg>$expand</span><span class=o>=</span><span class=n>relations</span><span class=o>&amp;</span><span class=n>api</span><span class=o>-</span><span class=n>version</span><span class=o>=</span><span class=mi>6</span><span class=o>.</span><span class=mi>1</span><span class=o>-</span><span class=n>preview</span><span class=o>.</span><span class=mi>3</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p><strong>NOTE:</strong> The querystring paramater <code>$expand=relations</code> which is required for expanding related links in the response.</p></blockquote></li><li><p>Rename this action <strong>Get WorkItem Relationships</strong>. We will use this name in subsequent steps when retrieving values from the output of this action.</p></li></ol><p>This will retrieve the work item details and expand all related links, such as commits or pull requests.</p><h2 id=step-5-set-the-hasartifactlinks-flag>Step 5: Set the HasArtifactLinks Flag</h2><p>Once I had the relationships, I needed to update the HasArtifactLinks variable to true if any artifact links were found. Here&rsquo;s how:</p><ol><li><p>Add an action <strong>Set variable</strong>:</p><p><img src=/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/set-variable.png width=1041 height=770 srcset="/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/set-variable_hu10611356987897947924.png 480w, /blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/set-variable_hu4505616536500489498.png 1024w" loading=lazy alt="Add an action &ldquo;Set variable&rdquo;" class=gallery-image data-flex-grow=135 data-flex-basis=324px></p></li><li><p>Choose <code>HasArtifactLinks</code> variable from the drop down.</p></li><li><p>Set the <strong>Value</strong> to the following expression:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>contains</span><span class=p>(</span><span class=n>string</span><span class=p>(</span><span class=n>body</span><span class=p>(</span><span class=s1>&#39;Get_WorkItem_Relationships&#39;</span><span class=p>)</span><span class=sc>?[</span><span class=s1>&#39;relations&#39;</span><span class=o>]</span><span class=p>),</span><span class=s1>&#39;ArtifactLink&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p><strong>NOTE:</strong> We are using the output from our previous step (in this case, &ldquo;Get_WorkItem_Relationships&rdquo; â€” use the UI to add dynamic content in the expression to make sure you&rsquo;ll have the right value). In addition, we are keeping things simple by converting the JSON to a string, and simply checking if it contains the text <code>"ArtifactLink"</code>.</p></blockquote></li></ol><p>This will set the variable <code>HasArtifactLinks</code> to true if there are any links of type <strong>ArtifactLink</strong>.</p><h2 id=step-6-handling-different-work-item-states>Step 6: Handling Different Work Item States</h2><p>Now comes the interesting partâ€”handling different scenarios based on the work item state. Depending on whether the work item is Resolved, Closed, or Blocked, I wanted the flow to send notifications accordingly.</p><p>Here&rsquo;s how I handled it:</p><ol><li><p>Add a new <strong>Switch</strong> action and set the Work item <strong>State</strong> as the input.</p><p><img src=/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/state-switch.png width=1041 height=710 srcset="/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/state-switch_hu6068443783217680742.png 480w, /blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/state-switch_hu14866028207335255194.png 1024w" loading=lazy alt="Add a new Switch action and set the Work item state as the input" class=gallery-image data-flex-grow=146 data-flex-basis=351px></p></li><li><p>In the <strong>Resolved</strong> case, I send a notification to the QA team:</p><ul><li><p><strong>Action:</strong> Post a message in a chat or channel.</p></li><li><p><strong>Recipient:</strong> Email address of the QA person/team.</p></li><li><p><strong>Message:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-scss data-lang=scss><span class=line><span class=cl><span class=o>&lt;</span><span class=nt>a</span> <span class=nt>href</span><span class=o>=</span><span class=s2>&#34;@{body(&#39;Get_WorkItem_Relationships&#39;)?[&#39;_links&#39;]?[&#39;html&#39;]?[&#39;href&#39;]}&#34;</span> <span class=nt>class</span><span class=o>=</span><span class=s2>&#34;editor-link&#34;</span><span class=o>&gt;@</span><span class=p>{</span><span class=nt>triggerOutputs</span><span class=o>()?[</span><span class=s1>&#39;body/fields&#39;</span><span class=o>]?[</span><span class=s1>&#39;System_WorkItemType&#39;</span><span class=o>]</span><span class=p>}</span> <span class=o>@</span><span class=p>{</span><span class=nt>triggerOutputs</span><span class=o>()?[</span><span class=s1>&#39;body/id&#39;</span><span class=o>]</span><span class=p>}</span><span class=o>&lt;/</span><span class=nt>a</span><span class=o>&gt;</span> <span class=nt>is</span> <span class=o>@</span><span class=p>{</span><span class=nt>triggerOutputs</span><span class=o>()?[</span><span class=s1>&#39;body/fields&#39;</span><span class=o>]?[</span><span class=s1>&#39;System_State&#39;</span><span class=o>]</span><span class=p>}</span> <span class=nt>and</span> <span class=nt>is</span> <span class=nt>now</span> <span class=nt>ready</span> <span class=nt>for</span> <span class=nt>testing</span><span class=nc>.</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/chat-message.png width=954 height=771 srcset="/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/chat-message_hu17817626215548667272.png 480w, /blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/chat-message_hu13845535103764819365.png 1024w" loading=lazy alt="Action: Post a message in a chat or channel" class=gallery-image data-flex-grow=123 data-flex-basis=296px></p><p>This includes a hyperlink to the work item in the chat message</p></li></ul></li><li><p>In the <strong>Resolved</strong> case, I also checked the <code>HasArtifactLinks</code> variable to determine if commits were linked to the work item. If the variable was false, I sent a message to the assigned user requesting a linked commit:</p><ul><li><p><strong>Action:</strong> Send an HTTP request to Azure DevOps.</p></li><li><p><strong>Relative URI:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=err>@</span><span class=p>{</span><span class=n>triggerOutputs</span><span class=p>()?[</span><span class=err>&#39;</span><span class=n>body</span><span class=p>/</span><span class=n>fields</span><span class=err>&#39;</span><span class=p>]?[</span><span class=err>&#39;</span><span class=n>System_TeamProject</span><span class=err>&#39;</span><span class=p>]}/</span><span class=n>_apis</span><span class=p>/</span><span class=n>wit</span><span class=p>/</span><span class=n>workItems</span><span class=p>/</span><span class=err>@</span><span class=p>{</span><span class=n>triggerOutputs</span><span class=p>()?[</span><span class=err>&#39;</span><span class=n>body</span><span class=p>/</span><span class=n>id</span><span class=err>&#39;</span><span class=p>]}/</span><span class=n>comments</span><span class=p>?</span><span class=n>api</span><span class=p>-</span><span class=n>version</span><span class=p>=</span><span class=m>6.1</span><span class=p>-</span><span class=n>preview</span><span class=p>.</span><span class=m>3</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>Body:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;&lt;div&gt;&lt;a href=\&#34;#\&#34; data-vss-mention=\&#34;version:2.0,@{body(&#39;Get_WorkItem_Relationships&#39;)?[&#39;fields&#39;]?[&#39;System.AssignedTo&#39;]?[&#39;id&#39;]}\&#34;&gt;@{body(&#39;Get_WorkItem_Relationships&#39;)?[&#39;fields&#39;]?[&#39;System.AssignedTo&#39;]?[&#39;displayName&#39;]}&lt;/a&gt;, no commits were found. Please review and update if code changes were made.&lt;/div&gt;&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/mention-assigned.png width=1758 height=898 srcset="/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/mention-assigned_hu18189822933288038008.png 480w, /blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/mention-assigned_hu83513881703856598.png 1024w" loading=lazy alt="Action: Send an HTTP request to Azure DevOps" class=gallery-image data-flex-grow=195 data-flex-basis=469px></p></li></ul><p>This mentioned the assigned user in a comment on the work item, which will trigger an email message.</p></li><li><p>In the <strong>Closed</strong> case, I checked the <code>HasArtifactLinks</code> variable to determine if commits were linked to the work item. If the variable was false, I sent a message to the assigned user requesting a linked commit:</p><ul><li><p><strong>Action:</strong> Post a message in a chat or channel.</p></li><li><p><strong>Recipient:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=n>triggerOutputs</span><span class=p>()?[</span><span class=err>&#39;</span><span class=n>body</span><span class=p>/</span><span class=n>fields</span><span class=err>&#39;</span><span class=p>]?[</span><span class=err>&#39;</span><span class=n>Vsts_AssignedToEmail</span><span class=err>&#39;</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>Message:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-scss data-lang=scss><span class=line><span class=cl><span class=o>&lt;</span><span class=nt>a</span> <span class=nt>href</span><span class=o>=</span><span class=s2>&#34;@{body(&#39;Get_WorkItem_Relationships&#39;)?[&#39;_links&#39;]?[&#39;html&#39;]?[&#39;href&#39;]}&#34;</span> <span class=nt>class</span><span class=o>=</span><span class=s2>&#34;editor-link&#34;</span><span class=o>&gt;@</span><span class=p>{</span><span class=nt>triggerOutputs</span><span class=o>()?[</span><span class=s1>&#39;body/fields&#39;</span><span class=o>]?[</span><span class=s1>&#39;System_WorkItemType&#39;</span><span class=o>]</span><span class=p>}</span> <span class=o>@</span><span class=p>{</span><span class=nt>triggerOutputs</span><span class=o>()?[</span><span class=s1>&#39;body/id&#39;</span><span class=o>]</span><span class=p>}</span><span class=o>&lt;/</span><span class=nt>a</span><span class=o>&gt;</span> <span class=nt>is</span> <span class=o>@</span><span class=p>{</span><span class=nt>triggerOutputs</span><span class=o>()?[</span><span class=s1>&#39;body/fields&#39;</span><span class=o>]?[</span><span class=s1>&#39;System_State&#39;</span><span class=o>]</span><span class=p>}</span> <span class=nt>but</span> <span class=nt>no</span> <span class=nt>commits</span> <span class=nt>were</span> <span class=nt>found</span><span class=nc>.</span> <span class=nt>Please</span> <span class=nt>review</span> <span class=nt>and</span> <span class=nt>update</span> <span class=nt>if</span> <span class=nt>code</span> <span class=nt>changes</span> <span class=nt>were</span> <span class=nt>made</span><span class=nc>.</span><span class=o>&lt;/</span><span class=nt>p</span><span class=o>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/chat-commits.png width=1561 height=918 srcset="/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/chat-commits_hu4906653284824675661.png 480w, /blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/chat-commits_hu3289294940708082188.png 1024w" loading=lazy alt="Action: Post a message in a chat or channel." class=gallery-image data-flex-grow=170 data-flex-basis=408px></p></li></ul></li><li><p>If the work item was <strong>Blocked</strong>, I posted a message to the creator of the work item to notify them of the block.</p><ul><li><p><strong>Action:</strong> Post a message in a chat or channel.</p></li><li><p><strong>Recipient:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=n>body</span><span class=p>(</span><span class=err>&#39;</span><span class=n>Get_WorkItem_Relationships</span><span class=err>&#39;</span><span class=p>)?[</span><span class=err>&#39;</span><span class=n>fields</span><span class=err>&#39;</span><span class=p>]?[</span><span class=err>&#39;</span><span class=nc>System</span><span class=p>.</span><span class=n>CreatedBy</span><span class=err>&#39;</span><span class=p>]?[</span><span class=err>&#39;</span><span class=n>uniqueName</span><span class=err>&#39;</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>Message:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-scss data-lang=scss><span class=line><span class=cl><span class=o>&lt;</span><span class=nt>a</span> <span class=nt>href</span><span class=o>=</span><span class=s2>&#34;@{body(&#39;Get_WorkItem_Relationships&#39;)?[&#39;_links&#39;]?[&#39;html&#39;]?[&#39;href&#39;]}&#34;</span> <span class=nt>class</span><span class=o>=</span><span class=s2>&#34;editor-link&#34;</span><span class=o>&gt;@</span><span class=p>{</span><span class=nt>triggerOutputs</span><span class=o>()?[</span><span class=s1>&#39;body/fields&#39;</span><span class=o>]?[</span><span class=s1>&#39;System_WorkItemType&#39;</span><span class=o>]</span><span class=p>}</span> <span class=o>@</span><span class=p>{</span><span class=nt>triggerOutputs</span><span class=o>()?[</span><span class=s1>&#39;body/id&#39;</span><span class=o>]</span><span class=p>}</span><span class=o>&lt;/</span><span class=nt>a</span><span class=o>&gt;</span> <span class=nt>is</span> <span class=nt>currently</span> <span class=o>@</span><span class=p>{</span><span class=nt>triggerOutputs</span><span class=o>()?[</span><span class=s1>&#39;body/fields&#39;</span><span class=o>]?[</span><span class=s1>&#39;System_State&#39;</span><span class=o>]</span><span class=p>}</span><span class=nc>.</span> <span class=nt>Please</span> <span class=nt>contact</span> <span class=o>@</span><span class=p>{</span><span class=nt>triggerOutputs</span><span class=o>()?[</span><span class=s1>&#39;body/fields&#39;</span><span class=o>]?[</span><span class=s1>&#39;System_AssignedTo&#39;</span><span class=o>]</span><span class=p>}</span> <span class=nt>to</span> <span class=nt>find</span> <span class=nt>out</span> <span class=nt>why</span> <span class=nt>and</span> <span class=nt>help</span> <span class=nt>unblock</span> <span class=nt>it</span><span class=nc>.</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/notify-createdby.png width=1559 height=921 srcset="/blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/notify-createdby_hu15581787555916154072.png 480w, /blog/2024/10/08/automating-notifications-in-azure-devops-using-power-automate/notify-createdby_hu9540251852544280542.png 1024w" loading=lazy alt="Action: Post a message in a chat or channel." class=gallery-image data-flex-grow=169 data-flex-basis=406px></p></li></ul></li></ol><p>By setting up this Power Automate flow, I no longer have to worry about manually tracking work item updates or notifying team members. Whether a work item is resolved, blocked, or closed, the flow ensures the right people get notified at the right time. Plus, with the artifact link checks, developers can easily review the associated commits and pull requests.</p><p>References:<br><a class=link href="https://learn.microsoft.com/en-us/rest/api/azure/devops/?view=azure-devops-rest-7.2" target=_blank rel=noopener>Azure DevOps Services REST API Reference</a><br><a class=link href=https://learn.microsoft.com/en-us/connectors/visualstudioteamservices target=_blank rel=noopener>Azure DevOps Connector</a><br><a class=link href=https://learn.microsoft.com/en-us/connectors/visualstudioteamservices/#send-an-http-request-to-azure-devops target=_blank rel=noopener>Send an HTTP request to Azure DevOps</a><br><a class=link href="https://learn.microsoft.com/en-us/connectors/teams/?tabs=text1%2Cdotnet" target=_blank rel=noopener>Microsoft Teams Connector</a><br><a class=link href="https://learn.microsoft.com/en-us/connectors/teams/?tabs=text1%2Cdotnet#post-message-in-a-chat-or-channel" target=_blank rel=noopener>Post message in a chat or channel</a><br><a class=link href=https://medium.com/@benjihuser/adding-notifications-to-ms-teams-when-azure-devops-work-items-are-waiting-using-power-automate-b5466eb1cae6 target=_blank rel=noopener>Adding Notifications to MS Teams when Azure DevOps Work Items are Waiting using Power Automate</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/azure-devops/>Azure-Devops</a>
<a href=/tags/power-automate/>Power Automate</a>
<a href=/tags/automation/>Automation</a>
<a href=/tags/work-item-tracking/>Work Item Tracking</a>
<a href=/tags/notifications/>Notifications</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Last updated on Oct 09, 2024 15:56 EST</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/blog/2022/09/28/integrate-container-apps-api-management-bicep/><div class=article-image><img src=/blog/2022/09/28/integrate-container-apps-api-management-bicep/cover.75e2af693cf529f11e3b3d77d8d5ba1a_hu16167138434765339862.png width=250 height=150 loading=lazy alt="Featured image of post Integrate Container Apps With Api Management using Bicep" data-key=integrate-container-apps-api-management-bicep data-hash="md5-deKvaTz1KfEeOz132NW6Gg=="></div><div class=article-details><h2 class=article-title>Integrate Container Apps With Api Management using Bicep</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=achingono/achingono.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxNjE3MTg1NzM=" data-category=general data-category-id=DIC_kwDOCaOhLc4COKuY data-mapping=title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark_dimmed")}})()</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 Alfero Chingono</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.27.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>